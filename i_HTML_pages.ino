void handleSensorPage() {
  String html ="<!DOCTYPE html> <html> <head> <title>Group16_AirQ_SENSORS</title> <style> .item { height: 25rem; display: flex; flex-direction: column; justify-content: center; text-align: center; border: 6px solid black; border-radius: 50%; flex: 1 1 25rem; } .item i { font-size: 6rem; margin-bottom: 10px; } .item p { font-size: 4rem; margin: 0; font-style: italic; } .item span { font-size: 2.5rem; margin: 0; } label { font-size: 1.5rem; } button { padding: 0.4rem 1.5rem; width: auto; margin: 20px auto; font-size: 1.2rem; } </style> </head> <body style=\"font-family: Rubik; width: 55rem; margin: auto\"> <div style=\" display: flex; flex-direction: row; align-items: center; gap: 40px; font-size: 1.6rem; \" > <a href=\"/\">Home</a> <a href=\"/wifi-config\">Wifi configs</a> <p style=\"margin-left: auto\"> Status: <b id=\"status\" style=\"color: red\">OFFLINE</b> </p> </div> <div> <h1 style=\"text-align: center; font-size: 6rem\">Sensors</h1> <div style=\" display: flex; flex-direction: row; flex-wrap: wrap; gap: 2rem; width: 100%; \" > <div class=\"item\"> <p>Temperature</p> <span><span id=\"temp\"> </span>&#8451;</span> </div> <div class=\"item\"> <p>Humidity</p> <span><span id=\"humidity\"> </span>%</span> </div> <div class=\"item\"> <p>Chemicals</p> <span><span id=\"chemical\"> </span>ppm</span> </div> <div class=\"item\"> <p>PM2.5</p> <span><span id=\"dust\"> </span>&#181;g/m&#179;</span> </div> </div> <div style=\" border: 1px solid #cdcdcd; border-radius: 10px; display: flex; flex-direction: column; padding: 2rem 3rem; width: 400px; margin: 100px auto; \" > <h1 style=\"text-align: center; font-size: 2rem\">Led configuration</h1> <form action=\"javascript:void(0);\" style=\"display: flex; flex-direction: column; width: 100%\" > <label for=\"color\">LED: </label> <input name=\"color\" type=\"color\" value=\"#ff8474\" style=\"width: 100%\" /> <label style=\"margin-top: 24px\" for=\"brightness\">Brightness: </label> <input name=\"brightness\" type=\"range\" value=\"1\" min=\"0\" max=\"1\" step=\"0.1\" /> <button type=\"submit\">Submit</button> </form> </div> </div> <script> function fetchState() { fetch('/api/state') .then((response) => response.text()) .then((data) => { let datas = data.split(' , '); document.getElementById('temp').textContent = datas[0]; document.getElementById('humidity').textContent = datas[1]; document.getElementById('chemical').textContent = datas[2]; document.getElementById('dust').textContent = datas[3]; }); } function hexToRgb(c) { if (/^#([a-f0-9]{3}){1,2}$/.test(c)) { if (c.length == 4) { c = '#' + [c[1], c[1], c[2], c[2], c[3], c[3]].join(''); } c = '0x' + c.substring(1); return [(c >> 16) & 255, (c >> 8) & 255, c & 255]; } return null; } fetchState(); setInterval(fetchState, 10000); document.querySelector('button').addEventListener('click', function (ev) { let formData = new FormData(); let [r, g, b] = hexToRgb(document.querySelector('[name=color]').value); let brightness = parseFloat( document.querySelector('[name=brightness]').value ).toFixed(2); formData.append('red', r); formData.append('green', g); formData.append('blue', b); formData.append('brightness', brightness); fetch('/api/led-config', { method: 'POST', body: formData }) .then((res) => res.text()) .then((text) => alert(text)) .catch((err) => alert(err)); }); const intervalId = setInterval(function () { fetch('/api/mqtt') .then((response) => { clearInterval(intervalId); document.getElementById('status').textContent = 'ONLINE'; document.getElementById('status').style.color = 'green'; }) .catch((err) => { document.getElementById('status').textContent = 'OFFLINE'; document.getElementById('status').style.color = 'red'; }); }, 5000); </script> </body> </html>";
  server.send(200, "text/html", html);
}

void handleWifiConfigPage() {
  String html ="<!DOCTYPE html> <html> <head> <title>Group16_AirQ_WIFI_CONFIG</title> </head> <style> input { padding: 0.3rem 0.6rem; font-size: 2rem; border: 0; border-bottom: 1px solid #666; margin: 0 10px; } input:focus { outline: none; border-bottom-width: 2px; } label { font-size: 2rem; } button { padding: 0.4rem 1.5rem; width: auto; margin: 40px auto; font-size: 2rem; } </style> <body style=\"width: 40rem; margin: 100px auto\"> <div style=\" display: flex; flex-direction: row; align-items: center; gap: 40px; font-size: 2rem; \" > <a href=\"/\">Home</a> <a href=\"/sensors\">Sensors</a> <p style=\"margin-left: auto\"> Status: <b id=\"status\" style=\"color: red\">OFFLINE</b> </p> </div> <div style=\" border: 1px solid #cdcdcd; border-radius: 10px; display: flex; flex-direction: column; padding: 2rem 3rem; \" > <h1 style=\"text-align: center; font-size: 5rem\">Wifi config</h1> <div> <form action=\"javascript:void(0);\" style=\"display: flex; flex-direction: column; width: 100%\" > <label for=\"ssid\">SSID: </label> <input name=\"ssid\" required /> <label style=\"margin-top: 24px\" for=\"password\">Password: </label> <input name=\"password\" type=\"password\" required /> <button id=\"submit-btn\" type=\"submit\">Submit</button> </form> </div> <span id=\"response\"></span> </div> <script> document .getElementById('submit-btn') .addEventListener('click', function (ev) { ev.preventDefault(); let formData = new FormData(); formData.append('ssid', document.querySelector('[name=ssid]').value); formData.append( 'password', document.querySelector('[name=password]').value ); fetch('/api/wifi', { method: 'POST', body: formData }) .then((res) => { document.getElementById('response').innerHTML += 'Connecting to WiFi successfully! Trying to connecting to MQTT server<br>'; let i = 0; const intervalId = setInterval(function () { fetch('/api/mqtt') .then((response) => { document.getElementById('response').innerHTML += 'Connecting to MQTT successfully! You are currently ONLINE<br>'; clearInterval(intervalId); document.getElementById('status').textContent = 'ONLINE'; document.getElementById('status').style.color = 'green'; }) .catch((err) => { document.getElementById( 'response' ).innerHTML = `Connecting to MQTT Failed! Attempting to try again! (${i})<br>`; document.getElementById('status').textContent = 'OFFLINE'; document.getElementById('status').style.color = 'red'; }); }, 5000); setTimeout(function () { clearInterval(intervalId); }, 20000); }) .catch((err) => { document.getElementById('response').innerHTML += 'Connecting to WiFi Failed! Please try again<br>'; }); }); </script> </body> </html>";
  server.send(200, "text/html", html);
}

void handleRoot() {
  String html ="<!DOCTYPE html> <html> <head> <title>Group16_AirQ_HOME</title> <style> a { padding: 1rem; text-align: center; background-color: black; color: white; border-radius: 10px; text-decoration: none; margin: 1rem auto; width: 48%; } hr { background-color: black; height: 2px; } </style> </head> <body style=\"font-family: Rubik; width: 55rem; margin: auto; font-size: 2rem\"> <p>Status: <b id=\"status\" style=\"color: red\">OFFLINE</b></p> <h1 style=\"text-align: center; font-size: 6rem\">Home</h1> <div style=\"display: flex; flex-direction: column\"> <a href=\"/wifi-config\"> Config WiFi</a> <a href=\"/sensors\"> View sensors data</a> <a href=\"/api/disconnect\"> Disconnect WiFi</a> <a href=\"#\" onclick=\"aboutUsClicked()\">About us</a> </div> </body> <script> function aboutUsClicked(ev) { alert( '------------- VL2 - GROUP 16 -------------\\n18127136 - Nguyễn Đăng Huỳnh Long\\n18127118 - Mai Đăng Khánh\\n18127269 - Nguyễn Thái Tân\\n ---------------------------------------------' ); } const intervalId = setInterval(function () { fetch('/api/mqtt') .then((response) => { clearInterval(intervalId); document.getElementById('status').textContent = 'ONLINE'; document.getElementById('status').style.color = 'green'; }) .catch((err) => { document.getElementById('status').textContent = 'OFFLINE'; document.getElementById('status').style.color = 'red'; }); }, 5000); </script> </html>";
  server.send(200, "text/html", html);
}
